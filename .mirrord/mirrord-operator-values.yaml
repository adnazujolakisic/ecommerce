# Mirrord operator values for reliable demo startup.
# Kafka splitting + DB branching â€” give operator and DB branch pods enough CPU so sessions don't fail.
#
# For busy clusters (nodes ~70%+ CPU): add a node or use larger machine type (e.g. e2-standard-4).
#
# Install: helm install mirrord-operator mirrord/mirrord-operator \
#   -n mirrord --create-namespace -f .mirrord/mirrord-operator-values.yaml

# license.key: set via --set license.key=$MIRRORD_LICENSE_KEY when installing

operator:
  kafkaSplitting: true
  pgBranching: true
  # More CPU/memory for operator on busy nodes (default: 100m/200m CPU, 100Mi/200Mi).
  # Helps avoid timeouts when spinning up Kafka splitting + DB branching.
  resources:
    requests:
      cpu: 200m
      memory: 200Mi
    limits:
      cpu: 500m
      memory: 512Mi

  # Optional: give DB branch pods enough resources to create quickly.
  # Prevents branch creation from failing when nodes are at high CPU.
  pgBranchConfig:
    dbPod:
      resources:
        requests:
          cpu: "100m"
          memory: "256Mi"
        limits:
          cpu: "500m"
          memory: "512Mi"
